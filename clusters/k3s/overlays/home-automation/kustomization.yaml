apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Reference the base home-automation stack
resources:
  - ../../../../apps/home-automation/

# Apply k3s-specific patches
patches:
  # HomeAssistant: USB device passthrough and increased resources
  - path: patches/homeassistant-production.yaml
  # Zigbee2MQTT: Real Zigbee coordinator and node affinity
  - path: patches/zigbee2mqtt-production.yaml
  # Mosquitto: Increased resources
  - path: patches/mosquitto-production.yaml
  # Homebridge: Increased resources
  - path: patches/homebridge-production.yaml
